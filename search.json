[{"title":"å®æµ‹ Gemini 3 Proï¼šä¸€è¡Œ Prompt ç”Ÿæˆ WebGL + MediaPipe æ‰‹åŠ¿äº¤äº’ç²’å­ç³»ç»Ÿ","url":"/2025/11/30/Gemini-3-pro-%E5%88%9B%E5%BB%BA%E7%82%AB%E9%85%B7%E7%B2%92%E5%AD%90%E4%BA%A4%E4%BA%92%E7%B3%BB%E7%BB%9F/","content":"å‰è¨€æœ€è¿‘ Gemini 3 Pro å‘å¸ƒï¼Œå¬è¯´åœ¨å¤šæ¨¡æ€ç†è§£å’Œä»£ç ç”Ÿæˆä¸Šæœ‰äº†è´¨çš„é£è·ƒã€‚ä½œä¸ºä¸€ä¸ªçƒ­è¡·äº AI Coding çš„å¼€å‘è€…ï¼Œæˆ‘ä¸€ç›´æƒ³åšä¸€ä¸ªåŸºäºæ‰‹åŠ¿æ§åˆ¶çš„ 3D ç²’å­ç³»ç»Ÿï¼Œä½†ä»¥å¾€å…‰æ˜¯é…ç½®ç¯å¢ƒã€è°ƒè¯• MediaPipe å’Œ Three.js çš„åæ ‡å¯¹é½å°±è¦èŠ±ä¸ŠåŠå¤©ã€‚\nä»Šå¤©ä½¿ç”¨Gemini 3åšä¸€ä¸ªæµ‹è¯•ï¼šä¸å†™ä¸€è¡Œä»£ç ï¼Œåªç»™ Promptï¼Œçœ‹ Gemini 3 Pro èƒ½å¦ç”Ÿæˆä¸€ä¸ªå•æ–‡ä»¶ã€æ— ä¾èµ–ï¼ˆCDNå¼•å…¥ï¼‰ã€é€»è¾‘é—­ç¯çš„ WebGL äº¤äº’åº”ç”¨ã€‚\nç»“æœä¸ä»…è·‘é€šäº†ï¼Œæ•ˆæœè¿˜å‡ºä¹æ„æ–™çš„å®Œæ•´ã€‚\nğŸ¨ æ•ˆæœå±•ç¤ºè¿™ä¸ªå•æ–‡ä»¶ HTML åŒ…å«äº†ä¸€å¥—å®Œæ•´çš„äº¤äº’ç³»ç»Ÿï¼š\n\nè§†è§‰ç››å®´ï¼š15,000 ä¸ªé«˜äº®ç²’å­ç»„æˆçš„ 3D æ˜Ÿäº‘ï¼Œæ”¯æŒâ€œå‘¼å¸â€åŠ¨æ•ˆã€‚\næ‰‹åŠ¿é­”æ³•ï¼šé€šè¿‡æ‘„åƒå¤´æ•æ‰æ‰‹éƒ¨ï¼Œå¼ å¼€æ‰‹æŒç²’å­çˆ†å‘æ‰©æ•£ï¼Œæ¡ç´§æ‹³å¤´ç²’å­èšåˆæˆé«˜èƒ½å…‰çƒã€‚\næ‰‹ç»˜è‡ªå®šä¹‰ï¼šåœ¨å±å¹•ä¸Šç”»ä»€ä¹ˆï¼Œç²’å­å°±å˜æˆä»€ä¹ˆå½¢çŠ¶ã€‚\nç»ç’ƒæ‹Ÿæ€ UIï¼šåŸºäº Tailwind CSS ç”Ÿæˆçš„ç°ä»£åŒ–åŠé€æ˜æ§åˆ¶é¢æ¿ã€‚\næ‰‹åŠ¿å¼€å…³ï¼šåœ¨é¢æ¿ä¸ŠåŠ ä¸Šæ‰‹åŠ¿è¯†åˆ«å¼€å…³ï¼Œå¼€å¯å¼€å…³åå†è¯†åˆ«æ‰‹åŠ¿\n\n\n\n\n\n\n\n\n\n\n\nå›¾1ï¼šèšåˆçŠ¶æ€ï¼ˆæ¡æ‹³ï¼‰\nå›¾2ï¼šæ‰©æ•£çŠ¶æ€ï¼ˆå¼ å¼€ï¼‰\n\n\nğŸ› ï¸ æ ¸å¿ƒä»£ç æ‹†è§£Gemini ç”Ÿæˆçš„ä»£ç ä¸ä»…è·‘å¾—é€šï¼Œè€Œä¸”æ¶æ„éå¸¸æ¸…æ™°ã€‚ä»¥ä¸‹æ˜¯æºç ä¸­å‡ ä¸ªè®©æˆ‘è§‰å¾—â€œå®ƒçœŸçš„æ‡‚ç¼–ç¨‹â€çš„äº®ç‚¹ã€‚\n1. ç‰©ç†æ¨¡æ‹Ÿä¸ Lerp æ’å€¼ç²’å­ä¸æ˜¯ç”Ÿç¡¬åœ°ç¬ç§»ï¼Œè€Œæ˜¯åŸºäºç‰©ç†çŠ¶æ€è¿›è¡Œå¹³æ»‘è¿‡æ¸¡ã€‚ä»£ç ä¸­ç»´æŠ¤äº† targetPositions (ç›®æ ‡å½¢çŠ¶) å’Œ currentPositions (å½“å‰ä½ç½®)ã€‚\nåœ¨ animate å¾ªç¯ä¸­ï¼Œå®ƒä½¿ç”¨äº†çº¿æ€§æ’å€¼ (Lerp) æ¥å®ç°ä¸æ»‘çš„å½¢å˜ï¼š\n// æ ¸å¿ƒåŠ¨ç”»å¾ªç¯ç‰‡æ®µ// force: æ‰‹åŠ¿å¼ å¼€ç¨‹åº¦ (0~1)// expansion: çˆ†ç‚¸ç³»æ•°let expansion = 0.35 + Math.pow(force, 0.5) * 1.5 + breathe; // è®¡ç®—ç›®æ ‡ä½ç½®ï¼ˆå åŠ äº†åŸºç¡€å½¢çŠ¶ã€æ•£å°„æ–¹å‘å’ŒæŠ–åŠ¨ï¼‰tx = (shapeX * expansion) + (sx * scatter) + jx;ty = (shapeY * expansion) + (sy * scatter) + jy;tz = (shapeZ * expansion) + (sz * scatter) + jz;// ä½¿ç”¨ Lerp å¹³æ»‘ç§»åŠ¨ç²’å­// speed è¿˜ä¼šæ ¹æ®æ‰‹åŠ¿åŠ›åº¦åŠ¨æ€è°ƒæ•´positions[ix] += (tx - positions[ix]) * speed;\n\n2. äºŒç»´æ‰‹ç»˜æ˜ å°„åˆ°ä¸‰ç»´ç©ºé—´è¿™æ˜¯æœ€è®©æˆ‘æƒŠå–œçš„åŠŸèƒ½ã€‚æˆ‘è¦æ±‚æœ‰ä¸€ä¸ªâ€œæ‰‹ç»˜æ¿â€ï¼Œå®ƒç”Ÿæˆäº†ä»¥ä¸‹é€»è¾‘ï¼š\n\nåˆ›å»ºä¸€ä¸ªéšè—çš„ 2D Canvasã€‚\nè¯»å–ç”¨æˆ·ç»˜åˆ¶çš„åƒç´ æ•°æ® (getImageData)ã€‚\néå†åƒç´ ï¼Œæå– Alpha &gt; 128 çš„éé€æ˜ç‚¹ã€‚\nåæ ‡é‡æ˜ å°„ï¼šå°† 2D å±å¹•åæ ‡ (x, y) å½’ä¸€åŒ–å¹¶æ˜ å°„åˆ° 3D ä¸–ç•Œåæ ‡ (x, y, 0)ã€‚\n\n\n\n// åƒç´ æå–ä¸åæ ‡æ˜ å°„é€»è¾‘const imgData = drawingCtx.getImageData(0, 0, width, height).data;const points = [];const step = 8; // é‡‡æ ·æ­¥é•¿ï¼Œä¼˜åŒ–æ€§èƒ½for (let y = 0; y &lt; height; y += step) &#123;    for (let x = 0; x &lt; width; x += step) &#123;        const alpha = imgData[(y * width + x) * 4 + 3];        // åªæœ‰ç»˜åˆ¶è¿‡çš„ç‚¹æ‰ä¼šè¢«è½¬åŒ–ä¸ºç²’å­        if (alpha &gt; 128) &#123;            // å½’ä¸€åŒ–åæ ‡ (-1 to 1) å¹¶æ”¾å¤§é€‚åº” 3D åœºæ™¯            const nX = (x / width) * 2 - 1;            const nY = -(y / height) * 2 + 1;            points.push(&#123; x: nX * 40, y: nY * 25, z: 0 &#125;);        &#125;    &#125;&#125;\n\n3. MediaPipe æ‰‹åŠ¿å½’ä¸€åŒ–æ‰‹åŠ¿è¯†åˆ«æœ€æ€•æŠ–åŠ¨ã€‚ä»£ç ä¸­é€šè¿‡è®¡ç®—æ‹‡æŒ‡å’Œé£ŸæŒ‡çš„æ¬§å‡ é‡Œå¾—è·ç¦»ï¼Œå¹¶åŠ å…¥äº†ä¸€ä¸ªç®€å•çš„ä½é€šæ»¤æ³¢å™¨ (Low-pass Filter) æ¥å¹³æ»‘æ•°å€¼ï¼š\n// ç®€å•çš„å¹³æ»‘ç®—æ³•ï¼Œé¿å…æ•°å€¼è·³å˜// state.diffusionForce æ˜¯ä¸Šä¸€å¸§çš„å€¼ï¼Œval æ˜¯å½“å‰å¸§çš„æ£€æµ‹å€¼state.diffusionForce = state.diffusionForce * 0.8 + val * 0.2;\n\n\n\nğŸ’» æºç åˆ†äº«è¿™å°±æ˜¯ Gemini 3 Pro ç”Ÿæˆçš„å®Œæ•´ä»£ç ã€‚ä½ å¯ä»¥ç›´æ¥å¤åˆ¶ä¿å­˜ä¸º index.htmlï¼Œç”¨æµè§ˆå™¨æ‰“å¼€å³å¯ä½“éªŒï¼ˆéœ€å…è®¸æ‘„åƒå¤´æƒé™ï¼‰ã€‚\n\nä¾èµ–è¯´æ˜ï¼šä»£ç é€šè¿‡ CDN å¼•å…¥äº† Three.js, MediaPipe å’Œ Tailwind CSSï¼Œæ— éœ€æœ¬åœ° npm installã€‚\n\n\nğŸ”½ ç‚¹å‡»å±•å¼€/æŠ˜å å®Œæ•´æºä»£ç  (index.html)\n\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh-CN&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;WebGestic - æ‰‹åŠ¿æ§åˆ¶ç²’å­ç³»ç»Ÿ&lt;/title&gt;    &lt;script src=&quot;[https://cdn.tailwindcss.com](https://cdn.tailwindcss.com)&quot;&gt;&lt;/script&gt;    &lt;script src=&quot;[https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js](https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js)&quot;&gt;&lt;/script&gt;    &lt;script src=&quot;[https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js](https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js)&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;    &lt;script src=&quot;[https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js](https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js)&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;    &lt;script src=&quot;[https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js](https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js)&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;    &lt;script src=&quot;[https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js](https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js)&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;    &lt;style&gt;        body &#123; margin: 0; overflow: hidden; background-color: #000; font-family: &#x27;Segoe UI&#x27;, Tahoma, Geneva, Verdana, sans-serif; &#125;        #canvas-container &#123; position: absolute; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1; &#125;                /* Glassmorphism UI */        .glass-panel &#123;            background: rgba(255, 255, 255, 0.05);            backdrop-filter: blur(10px);            -webkit-backdrop-filter: blur(10px);            border: 1px solid rgba(255, 255, 255, 0.1);            border-radius: 16px;            color: white;            transition: opacity 0.5s ease, transform 0.5s ease;        &#125;        /* Drawing Canvas */        #drawing-canvas &#123;            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10;            cursor: crosshair; display: none; background: rgba(0,0,0,0.8);        &#125;        /* ... (å…¶ä½™ CSS æ ·å¼ä¿æŒåŸæ ·ï¼Œä¸ºç¯‡å¹…è€ƒè™‘æ­¤å¤„ç•¥å»éƒ¨åˆ†åŸºç¡€æ ·å¼) ... */        .loader &#123; border: 4px solid rgba(255, 255, 255, 0.1); border-left-color: #4f46e5; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; &#125;        @keyframes spin &#123; 0% &#123; transform: rotate(0deg); &#125; 100% &#123; transform: rotate(360deg); &#125; &#125;        .ui-hidden &#123; opacity: 0; transform: translateX(100px); pointer-events: none; &#125;        .input_video &#123; display: none; &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div id=&quot;loader-overlay&quot; class=&quot;fixed inset-0 z-50 flex flex-col items-center justify-center bg-black transition-opacity duration-500&quot;&gt;        &lt;div class=&quot;loader mb-4&quot;&gt;&lt;/div&gt;        &lt;div class=&quot;text-white text-lg tracking-widest animate-pulse&quot;&gt;æ­£åœ¨åˆå§‹åŒ–è§†è§‰å¼•æ“...&lt;/div&gt;        &lt;div class=&quot;text-gray-500 text-sm mt-2&quot;&gt;è¯·å…è®¸æ‘„åƒå¤´æƒé™&lt;/div&gt;    &lt;/div&gt;    &lt;div id=&quot;canvas-container&quot;&gt;&lt;/div&gt;    &lt;video class=&quot;input_video&quot;&gt;&lt;/video&gt;    &lt;canvas id=&quot;drawing-canvas&quot;&gt;&lt;/canvas&gt;    &lt;div id=&quot;drawing-controls&quot; class=&quot;fixed top-4 left-1/2 transform -translate-x-1/2 z-20 hidden flex gap-4 glass-panel p-2&quot;&gt;        &lt;button id=&quot;finish-draw-btn&quot; class=&quot;bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition&quot;&gt;ç”Ÿæˆç²’å­&lt;/button&gt;        &lt;button id=&quot;clear-draw-btn&quot; class=&quot;bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition&quot;&gt;æ¸…é™¤&lt;/button&gt;        &lt;button id=&quot;cancel-draw-btn&quot; class=&quot;bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-bold shadow-lg transition&quot;&gt;å–æ¶ˆ&lt;/button&gt;    &lt;/div&gt;    &lt;div id=&quot;fs-tip&quot; class=&quot;fixed bottom-10 left-1/2 transform -translate-x-1/2 text-white/50 text-sm z-30 tracking-widest uppercase hidden transition-opacity duration-1000&quot;&gt;å·²è¿›å…¥å…¨å±æ¨¡å¼ - æŒ‰ ESC é€€å‡º&lt;/div&gt;    &lt;div id=&quot;ui-panel&quot; class=&quot;fixed top-4 right-4 w-80 glass-panel p-6 z-20 max-h-[90vh] overflow-y-auto&quot;&gt;        &lt;h1 class=&quot;text-2xl font-bold mb-1 bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent&quot;&gt;WebGestic&lt;/h1&gt;        &lt;p class=&quot;text-xs text-gray-400 mb-6&quot;&gt;åŸºäº MediaPipe &amp; WebGL&lt;/p&gt;        &lt;div class=&quot;flex items-center justify-between mb-4 bg-white/5 p-3 rounded-lg border border-white/10&quot;&gt;            &lt;span class=&quot;text-sm font-semibold text-gray-300&quot;&gt;æ‰‹åŠ¿è¯†åˆ«å¼€å…³&lt;/span&gt;            &lt;label class=&quot;relative inline-flex items-center cursor-pointer&quot;&gt;                &lt;input type=&quot;checkbox&quot; id=&quot;gesture-toggle&quot; class=&quot;sr-only peer&quot;&gt;                &lt;div class=&quot;w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[&#x27;&#x27;] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600&quot;&gt;&lt;/div&gt;            &lt;/label&gt;        &lt;/div&gt;        &lt;div class=&quot;flex flex-col gap-2 mb-6 bg-black/30 p-2 rounded-lg&quot;&gt;            &lt;div class=&quot;flex items-center gap-2&quot;&gt;                &lt;div id=&quot;hand-status-dot&quot; class=&quot;w-3 h-3 rounded-full bg-gray-600&quot;&gt;&lt;/div&gt;                &lt;span id=&quot;hand-status-text&quot; class=&quot;text-xs font-mono text-gray-500&quot;&gt;æ£€æµ‹å·²å…³é—­&lt;/span&gt;            &lt;/div&gt;            &lt;div id=&quot;gesture-text&quot; class=&quot;text-xs font-mono text-purple-300 pl-5 h-4&quot;&gt;&lt;/div&gt;        &lt;/div&gt;        &lt;div class=&quot;mb-6&quot;&gt;            &lt;label class=&quot;block text-sm font-semibold mb-3 text-purple-300&quot;&gt;ç²’å­å½¢æ€&lt;/label&gt;            &lt;div class=&quot;grid grid-cols-3 gap-2&quot;&gt;                &lt;button onclick=&quot;setShape(&#x27;nebula&#x27;)&quot; class=&quot;bg-white/10 hover:bg-white/20 py-2 rounded text-xs active border border-white/20 text-white&quot;&gt;æ˜Ÿäº‘&lt;/button&gt;                &lt;button onclick=&quot;setShape(&#x27;heart&#x27;)&quot; class=&quot;bg-white/10 hover:bg-white/20 py-2 rounded text-xs border border-transparent text-white&quot;&gt;çˆ±å¿ƒ&lt;/button&gt;                &lt;button onclick=&quot;toggleDrawingMode()&quot; class=&quot;bg-gradient-to-r from-blue-500 to-purple-600 hover:opacity-90 py-2 rounded text-xs font-bold shadow-lg text-white&quot;&gt;æ‰‹ç»˜è‡ªå®šä¹‰&lt;/button&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;div class=&quot;space-y-5&quot;&gt;            &lt;div&gt;                &lt;div class=&quot;flex justify-between mb-1&quot;&gt;                    &lt;label class=&quot;text-xs text-gray-300&quot;&gt;ç²’å­å¯†åº¦&lt;/label&gt;                    &lt;span id=&quot;density-val&quot; class=&quot;text-xs text-gray-400&quot;&gt;15000&lt;/span&gt;                &lt;/div&gt;                &lt;input type=&quot;range&quot; id=&quot;density-slider&quot; min=&quot;5000&quot; max=&quot;30000&quot; step=&quot;1000&quot; value=&quot;15000&quot; class=&quot;w-full&quot;&gt;            &lt;/div&gt;            &lt;div&gt;                &lt;div class=&quot;flex justify-between mb-1&quot;&gt;                    &lt;label class=&quot;text-xs text-gray-300&quot;&gt;æ‰©æ•£åŠ›åº¦&lt;/label&gt;                    &lt;span id=&quot;diffuse-val&quot; class=&quot;text-xs text-gray-400&quot;&gt;1.5&lt;/span&gt;                &lt;/div&gt;                &lt;input type=&quot;range&quot; id=&quot;diffuse-slider&quot; min=&quot;0.5&quot; max=&quot;3.0&quot; step=&quot;0.1&quot; value=&quot;1.5&quot; class=&quot;w-full&quot;&gt;            &lt;/div&gt;            &lt;div&gt;                &lt;label class=&quot;block text-xs font-semibold mb-2 text-gray-300&quot;&gt;ç²’å­é¢œè‰²&lt;/label&gt;                &lt;div class=&quot;flex gap-2&quot;&gt;                    &lt;input type=&quot;color&quot; id=&quot;color-picker&quot; value=&quot;#00ffff&quot; class=&quot;h-8 w-12 bg-transparent border-0 cursor-pointer&quot;&gt;                    &lt;div class=&quot;text-xs text-gray-400 flex items-center&quot;&gt;ç‚¹å‡»é€‰æ‹©ä¸»è‰²è°ƒ&lt;/div&gt;                &lt;/div&gt;            &lt;/div&gt;            &lt;div class=&quot;pt-4 border-t border-white/10&quot;&gt;                &lt;button id=&quot;fs-btn&quot; class=&quot;w-full bg-white/10 hover:bg-white/20 text-white py-2 rounded text-sm font-semibold transition flex items-center justify-center gap-2&quot;&gt;                    è¿›å…¥å…¨å±æ²‰æµ¸æ¨¡å¼                &lt;/button&gt;            &lt;/div&gt;        &lt;/div&gt;                &lt;div class=&quot;mt-6 pt-4 border-t border-white/10&quot;&gt;            &lt;h3 class=&quot;text-sm font-semibold text-purple-300 mb-2&quot;&gt;äº¤äº’æŒ‡å—&lt;/h3&gt;            &lt;ul class=&quot;text-xs text-gray-400 space-y-1 list-disc pl-4&quot;&gt;                &lt;li&gt;&lt;span class=&quot;text-white&quot;&gt;å¼€å…³&lt;/span&gt;ï¼šå¼€å¯é¡¶éƒ¨å¼€å…³å¯ç”¨æ£€æµ‹&lt;/li&gt;                &lt;li&gt;&lt;span class=&quot;text-white&quot;&gt;å¼ å¼€äº”æŒ‡&lt;/span&gt;ï¼šç²’å­å…¨å±é™æ­¢æ‰©æ•£&lt;/li&gt;                &lt;li&gt;&lt;span class=&quot;text-white&quot;&gt;æ¡ç´§æ‹³å¤´&lt;/span&gt;ï¼šèšåˆæˆå‘å…‰èƒ½é‡çƒ&lt;/li&gt;            &lt;/ul&gt;        &lt;/div&gt;    &lt;/div&gt;    &lt;script&gt;        // --- æ ¸å¿ƒé€»è¾‘éƒ¨åˆ† (Global Variables) ---        let scene, camera, renderer, particles, geometry, material;        const state = &#123;            targetPositions: [], currentPositions: [], scatterDirections: [],            count: 15000, baseColor: new THREE.Color(0x00ffff),            diffusionForce: 0, isHandPresent: false, gestureEnabled: false,            shapeType: &#x27;nebula&#x27;, diffusionMultiplier: 1.5        &#125;;        // DOM Elements        const uiPanel = document.getElementById(&#x27;ui-panel&#x27;);        const drawingCanvas = document.getElementById(&#x27;drawing-canvas&#x27;);        const drawingCtx = drawingCanvas.getContext(&#x27;2d&#x27;);        const drawingControls = document.getElementById(&#x27;drawing-controls&#x27;);        let isDrawing = false, isDrawingMode = false;        window.onload = function() &#123;            initThree();            createParticles();            initMediaPipe();            animate();            setupEventListeners();            window.addEventListener(&#x27;resize&#x27;, onWindowResize, false);            document.getElementById(&#x27;canvas-container&#x27;).addEventListener(&#x27;dblclick&#x27;, toggleFullscreen);            resizeDrawingCanvas();        &#125;;        function initThree() &#123;            const container = document.getElementById(&#x27;canvas-container&#x27;);            scene = new THREE.Scene();            scene.fog = new THREE.FogExp2(0x000000, 0.003);            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);            camera.position.z = 50;            renderer = new THREE.WebGLRenderer(&#123; antialias: false, alpha: true &#125;);            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));            renderer.setSize(window.innerWidth, window.innerHeight);            container.appendChild(renderer.domElement);        &#125;        function createParticles() &#123;            if (particles) scene.remove(particles);            geometry = new THREE.BufferGeometry();            state.targetPositions = new Float32Array(state.count * 3);            state.currentPositions = new Float32Array(state.count * 3);            state.scatterDirections = new Float32Array(state.count * 3);             const colors = new Float32Array(state.count * 3);            generateShape(state.shapeType);            for (let i = 0; i &lt; state.count * 3; i++) &#123;                state.currentPositions[i] = (Math.random() - 0.5) * 100;                state.scatterDirections[i] = (Math.random() - 0.5);                 colors[i] = state.baseColor.r;            &#125;            geometry.setAttribute(&#x27;position&#x27;, new THREE.BufferAttribute(state.currentPositions, 3));            geometry.setAttribute(&#x27;color&#x27;, new THREE.BufferAttribute(colors, 3));                        // Texture for glow            const canvas = document.createElement(&#x27;canvas&#x27;); canvas.width = 32; canvas.height = 32;            const context = canvas.getContext(&#x27;2d&#x27;);            const gradient = context.createRadialGradient(16, 16, 0, 16, 16, 16);            gradient.addColorStop(0, &#x27;rgba(255, 255, 255, 1)&#x27;);             gradient.addColorStop(1, &#x27;rgba(0,0,0,0)&#x27;);            context.fillStyle = gradient; context.fillRect(0, 0, 32, 32);            const texture = new THREE.Texture(canvas); texture.needsUpdate = true;            material = new THREE.PointsMaterial(&#123;                size: 1.0, map: texture, vertexColors: true,                blending: THREE.AdditiveBlending, depthWrite: false, transparent: true, opacity: 0.9            &#125;);            particles = new THREE.Points(geometry, material);            scene.add(particles);        &#125;        // --- å½¢çŠ¶ç”Ÿæˆå™¨ ---        function generateShape(type, customPoints = null) &#123;            state.shapeType = type;            const positions = state.targetPositions;            for (let i = 0; i &lt; state.count; i++) &#123;                let x, y, z;                if (type === &#x27;nebula&#x27;) &#123;                    const r = 25 * Math.cbrt(Math.random());                    const theta = Math.random() * 2 * Math.PI;                    const phi = Math.acos(2 * Math.random() - 1);                    x = r * Math.sin(phi) * Math.cos(theta);                    y = r * Math.sin(phi) * Math.sin(theta);                    z = r * Math.cos(phi);                &#125; else if (type === &#x27;heart&#x27;) &#123;                    const t = Math.random() * Math.PI * 2;                    const r = Math.cbrt(Math.random()); const s = 1.2;                     x = 16 * Math.pow(Math.sin(t), 3) * s * r;                    y = (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t)) * s * r;                    z = (Math.random() - 0.5) * 15 * r;                 &#125; else if (type === &#x27;custom&#x27; &amp;&amp; customPoints &amp;&amp; customPoints.length &gt; 0) &#123;                    const p = customPoints[i % customPoints.length];                    x = p.x + (Math.random() - 0.5);                    y = p.y + (Math.random() - 0.5);                    z = (Math.random() - 0.5) * 5;                 &#125;                positions[i * 3] = x; positions[i * 3 + 1] = y; positions[i * 3 + 2] = z;            &#125;        &#125;        // --- åŠ¨ç”»å¾ªç¯ ---        function animate() &#123;            requestAnimationFrame(animate);            const positions = geometry.attributes.position.array;            const colors = geometry.attributes.color.array;            const force = state.diffusionForce;             const multiplier = state.diffusionMultiplier * 50;             const time = Date.now() * 0.001;            const breathe = (force &gt; 0.2 &amp;&amp; force &lt; 0.8) ? 0 : Math.sin(time * 2) * 0.02;            let jitter = (force &lt; 0.2) ? 0.15 : 0;            if (force &lt; 0.2) &#123; particles.rotation.y += 0.08; particles.rotation.z += 0.02; &#125;            else &#123; particles.rotation.y += 0.002; particles.rotation.z *= 0.95; &#125;            for (let i = 0; i &lt; state.count; i++) &#123;                const ix = i * 3; const iy = i * 3 + 1; const iz = i * 3 + 2;                let expansion = 0.35 + Math.pow(force, 0.5) * 1.5 + breathe;                 let scatter = (force &gt; 0.3) ? (force - 0.3) * multiplier : 0;                let jx = 0, jy = 0, jz = 0;                if (jitter &gt; 0) &#123; jx = (Math.random()-0.5)*jitter; jy = (Math.random()-0.5)*jitter; jz = (Math.random()-0.5)*jitter; &#125;                let tx = (state.targetPositions[ix] * expansion) + (state.scatterDirections[ix] * scatter) + jx;                let ty = (state.targetPositions[iy] * expansion) + (state.scatterDirections[iy] * scatter) + jy;                let tz = (state.targetPositions[iz] * expansion) + (state.scatterDirections[iz] * scatter) + jz;                const speed = (force &gt; 0.5) ? 0.15 : 0.08;                positions[ix] += (tx - positions[ix]) * speed;                positions[iy] += (ty - positions[iy]) * speed;                positions[iz] += (tz - positions[iz]) * speed;                // Color Logic                let r, g, b;                if (force &lt; 0.3) &#123;                    const heat = (1 - force/0.3);                    r = state.baseColor.r + heat * 0.8; g = state.baseColor.g + heat * 0.8; b = state.baseColor.b + heat * 0.8;                &#125; else &#123;                    const pulse = Math.sin(time + i * 0.01) * 0.1;                    r = state.baseColor.r + pulse; g = state.baseColor.g + pulse; b = state.baseColor.b + pulse;                &#125;                colors[ix] = r; colors[iy] = g; colors[iz] = b;            &#125;            geometry.attributes.position.needsUpdate = true;            geometry.attributes.color.needsUpdate = true;            renderer.render(scene, camera);        &#125;        // --- MediaPipe Setup ---        function initMediaPipe() &#123;            const videoElement = document.querySelector(&#x27;.input_video&#x27;);            const hands = new Hands(&#123;locateFile: (file) =&gt; `https://cdn.jsdelivr.net/npm/@mediapipe/hands/$&#123;file&#125;`&#125;);            hands.setOptions(&#123; maxNumHands: 1, modelComplexity: 1, minDetectionConfidence: 0.5, minTrackingConfidence: 0.5 &#125;);            hands.onResults(onHandResults);            const camera = new Camera(videoElement, &#123;                onFrame: async () =&gt; &#123; if (state.gestureEnabled) await hands.send(&#123;image: videoElement&#125;); &#125;,                width: 640, height: 480            &#125;);            camera.start().then(() =&gt; &#123;                document.getElementById(&#x27;loader-overlay&#x27;).style.opacity = &#x27;0&#x27;;                setTimeout(() =&gt; document.getElementById(&#x27;loader-overlay&#x27;).style.display = &#x27;none&#x27;, 500);            &#125;);        &#125;        function onHandResults(results) &#123;            if (!state.gestureEnabled) return;            const handDot = document.getElementById(&#x27;hand-status-dot&#x27;);            const handText = document.getElementById(&#x27;hand-status-text&#x27;);            const gestureText = document.getElementById(&#x27;gesture-text&#x27;);            if (results.multiHandLandmarks &amp;&amp; results.multiHandLandmarks.length &gt; 0) &#123;                state.isHandPresent = true;                handDot.className = &quot;w-3 h-3 rounded-full bg-green-500 animate-pulse&quot;;                handText.innerText = &quot;å·²è¿æ¥è§†è§‰æ§åˆ¶&quot;;                handText.className = &quot;text-xs font-mono text-green-400&quot;;                                const landmarks = results.multiHandLandmarks[0];                const dx = landmarks[0].x - landmarks[12].x;                const dy = landmarks[0].y - landmarks[12].y;                const palmDist = Math.sqrt(dx*dx + dy*dy);                                let val = (palmDist - 0.15) * 4.5;                val = Math.max(0, Math.min(1, val));                state.diffusionForce = state.diffusionForce * 0.8 + val * 0.2; // Smooth                if (val &gt; 0.6) &#123;                    gestureText.innerText = &quot;æ‰‹åŠ¿: å¼ å¼€ (çˆ†å‘)&quot;;                    gestureText.className = &quot;text-xs font-mono text-yellow-400 pl-5 h-4&quot;;                &#125; else &#123;                    gestureText.innerText = &quot;æ‰‹åŠ¿: æ¡æ‹³ (å……èƒ½)&quot;;                    gestureText.className = &quot;text-xs font-mono text-white pl-5 h-4 animate-pulse&quot;;                &#125;            &#125; else &#123;                state.isHandPresent = false;                state.diffusionForce = state.diffusionForce * 0.9;                handDot.className = &quot;w-3 h-3 rounded-full bg-red-500&quot;;                handText.innerText = &quot;ç­‰å¾…æ‰‹éƒ¨...&quot;;                handText.className = &quot;text-xs font-mono text-white&quot;;                gestureText.innerText = &quot;&quot;;            &#125;        &#125;        // --- Event Listeners &amp; Drawing Logic ---        function setupEventListeners() &#123;            document.getElementById(&#x27;density-slider&#x27;).addEventListener(&#x27;input&#x27;, (e) =&gt; &#123;                const val = parseInt(e.target.value); document.getElementById(&#x27;density-val&#x27;).innerText = val;                clearTimeout(window.resizeTimer); window.resizeTimer = setTimeout(() =&gt; &#123; state.count = val; createParticles(); &#125;, 100);            &#125;);            document.getElementById(&#x27;diffuse-slider&#x27;).addEventListener(&#x27;input&#x27;, (e) =&gt; &#123;                state.diffusionMultiplier = parseFloat(e.target.value); document.getElementById(&#x27;diffuse-val&#x27;).innerText = state.diffusionMultiplier.toFixed(1);            &#125;);            document.getElementById(&#x27;color-picker&#x27;).addEventListener(&#x27;input&#x27;, (e) =&gt; state.baseColor.set(e.target.value));            document.getElementById(&#x27;gesture-toggle&#x27;).addEventListener(&#x27;change&#x27;, (e) =&gt; &#123;                state.gestureEnabled = e.target.checked;                if(!state.gestureEnabled) &#123; state.diffusionForce = 0; document.getElementById(&#x27;hand-status-text&#x27;).innerText = &quot;æ£€æµ‹å·²å…³é—­&quot;; &#125;                else &#123; document.getElementById(&#x27;hand-status-text&#x27;).innerText = &quot;æ­£åœ¨å¯åŠ¨...&quot;; &#125;            &#125;);            // ... Drawing Events (Mapped in full code) ...            document.getElementById(&#x27;finish-draw-btn&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; &#123;                const width = drawingCanvas.width; const height = drawingCanvas.height;                const imgData = drawingCtx.getImageData(0, 0, width, height).data;                const points = []; const step = 8;                for (let y = 0; y &lt; height; y += step) &#123;                    for (let x = 0; x &lt; width; x += step) &#123;                        if (imgData[(y * width + x) * 4 + 3] &gt; 128) &#123;                            points.push(&#123; x: ((x/width)*2-1)*40, y: (-(y/height)*2+1)*25, z: 0 &#125;);                        &#125;                    &#125;                &#125;                if (points.length &gt; 0) &#123; generateShape(&#x27;custom&#x27;, points); toggleDrawingMode(); &#125;            &#125;);        &#125;                function onWindowResize() &#123;            camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix();            renderer.setSize(window.innerWidth, window.innerHeight); resizeDrawingCanvas();        &#125;        function resizeDrawingCanvas() &#123; drawingCanvas.width = window.innerWidth; drawingCanvas.height = window.innerHeight; &#125;        function toggleDrawingMode() &#123;            isDrawingMode = !isDrawingMode;            drawingCanvas.style.display = isDrawingMode ? &#x27;block&#x27; : &#x27;none&#x27;;            drawingControls.classList.toggle(&#x27;hidden&#x27;);            if(isDrawingMode) &#123; drawingCtx.clearRect(0,0,drawingCanvas.width,drawingCanvas.height); drawingCtx.strokeStyle=&quot;white&quot;; drawingCtx.lineWidth=15; drawingCtx.lineCap=&quot;round&quot;; &#125;        &#125;        // Drawing pointers        drawingCanvas.addEventListener(&#x27;mousedown&#x27;, startDraw); drawingCanvas.addEventListener(&#x27;mousemove&#x27;, draw); drawingCanvas.addEventListener(&#x27;mouseup&#x27;, () =&gt; isDrawing=false);        function startDraw(e) &#123; isDrawing=true; draw(e); &#125;        function draw(e) &#123; if(!isDrawing) return; const rect=drawingCanvas.getBoundingClientRect(); drawingCtx.lineTo(e.clientX-rect.left, e.clientY-rect.top); drawingCtx.stroke(); drawingCtx.beginPath(); drawingCtx.moveTo(e.clientX-rect.left, e.clientY-rect.top); &#125;                // Fullscreen Logic        const fsTip = document.getElementById(&#x27;fs-tip&#x27;);        function toggleFullscreen() &#123;            if (!uiPanel.classList.contains(&#x27;ui-hidden&#x27;)) &#123;                uiPanel.classList.add(&#x27;ui-hidden&#x27;); fsTip.style.display=&#x27;block&#x27;; setTimeout(()=&gt;fsTip.style.opacity=&#x27;1&#x27;,10); setTimeout(()=&gt;fsTip.style.opacity=&#x27;0&#x27;,3000);                document.documentElement.requestFullscreen().catch(()=&gt;&#123;&#125;);            &#125; else &#123;                uiPanel.classList.remove(&#x27;ui-hidden&#x27;); fsTip.style.display=&#x27;none&#x27;;                if(document.exitFullscreen) document.exitFullscreen().catch(()=&gt;&#123;&#125;);            &#125;        &#125;        document.getElementById(&#x27;fs-btn&#x27;).addEventListener(&#x27;click&#x27;, toggleFullscreen);        document.addEventListener(&#x27;keydown&#x27;, (e) =&gt; &#123; if (e.key === &#x27;Escape&#x27;) &#123; uiPanel.classList.remove(&#x27;ui-hidden&#x27;); fsTip.style.display=&#x27;none&#x27;; &#125; &#125;);    &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\n\n\n\nğŸ§ æ€»ç»“ä¸å±•æœ›è¿™æ¬¡å®éªŒè®©æˆ‘å¯¹ Gemini 3 Pro çš„ä»£ç ç”Ÿæˆèƒ½åŠ›æœ‰äº†æ–°çš„è®¤è¯†ã€‚å®ƒä¸ä»…ä»…æ˜¯åœ¨å †ç Œ APIï¼Œæ›´æ˜¯åœ¨ç†è§£ç³»ç»Ÿé€»è¾‘ï¼š\n\nå›¾å½¢å­¦ç›´è§‰ï¼šå®ƒçŸ¥é“ç²’å­çš„è¿åŠ¨ä¸èƒ½ç”Ÿç¡¬ç¬ç§»ï¼Œå¿…é¡»ä½¿ç”¨æ’å€¼ï¼ˆLerpï¼‰æ‰èƒ½è·å¾—å¹³æ»‘çš„ç‰©ç†æ‰‹æ„Ÿã€‚\näº¤äº’å®¡ç¾ï¼šå®ƒæ‡‚å¾— UI ä¸åº”é®æŒ¡ 3D åœºæ™¯ï¼Œå› æ­¤è‡ªåŠ¨é€‰æ‹©äº†ç»ç’ƒæ‹Ÿæ€ï¼ˆGlassmorphismï¼‰é£æ ¼ã€‚\nå·¥ç¨‹æ€ç»´ï¼šå®ƒç”šè‡³è€ƒè™‘åˆ°äº†ç”¨æˆ·ä½“éªŒï¼Œæ·»åŠ äº† Loading åŠ¨ç”»ã€å…¨å±æç¤ºä»¥åŠé”™è¯¯å¤„ç†ã€‚\n\nå¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒAI å¹¶ä¸æ˜¯è¦å•çº¯åœ°å–ä»£æˆ‘ä»¬ï¼Œè€Œæ˜¯æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚ä»¥å‰ä»æ„æ€åˆ°å®ç°è¿™ä¸ª Demo å¯èƒ½éœ€è¦ä¸¤å¤©ï¼Œç°åœ¨åªéœ€è¦ 10 åˆ†é’Ÿã€‚\n\n\nç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰ä»£ç å‡ç”± AI è¾…åŠ©ç”Ÿæˆï¼Œæ¬¢è¿å¤åˆ¶ä½“éªŒï¼\n\n\n/* é’ˆå¯¹ Next ä¸»é¢˜ (.post-body) å¼ºåˆ¶å»é™¤è¡¨æ ¼è¾¹æ¡† */\n.post-body table, \n.post-body th, \n.post-body td, \n.post-body tr {\n    border: 0 !important;       /* å»æ‰è¾¹æ¡† */\n    background: none !important; /* å»æ‰éš”è¡Œå˜è‰²çš„ç°è‰²èƒŒæ™¯ */\n}\n\n/* å³ä½¿é¼ æ ‡æ‚¬åœä¹Ÿä¸è¦æ˜¾ç¤ºèƒŒæ™¯è‰² */\n.post-body tr:hover {\n    background: none !important;\n}\n\n/* å»æ‰è¡¨å¤´çš„åº•éƒ¨ç²—çº¿ */\n.post-body thead th {\n    border-bottom: none !important;\n}\n\n/* è°ƒæ•´å›¾ç‰‡åœ¨è¡¨æ ¼é‡Œçš„å¯¹é½æ–¹å¼ï¼Œè®©å®ƒä»¬é¡¶ç«¯å¯¹é½ */\n.post-body td {\n    vertical-align: top !important; \n    padding: 10px 5px !important; /* è°ƒæ•´é—´è· */\n}\n\n","categories":["åˆ›æ„ç¼–ç¨‹"],"tags":["Three.js","WebGL","MediaPipe","AIGC","Gemini"]},{"title":"Go è¯­è¨€æœºåˆ¶ | é¢å‘å¯¹è±¡ (OOP)ï¼šå°è£…ã€ç»§æ‰¿ä¸å¤šæ€çš„æ·±åº¦è§£æ","url":"/2025/12/01/Go-%E8%AF%AD%E8%A8%80%E6%9C%BA%E5%88%B6-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%9A%E5%B0%81%E8%A3%85%E3%80%81%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%A4%9A%E6%80%81%E7%9A%84%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/","content":"Go è¯­è¨€æ˜¯ä¸€é—¨å¹¶éä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é¢å‘å¯¹è±¡è¯­è¨€ã€‚å®ƒæ²¡æœ‰ classï¼ˆç±»ï¼‰ï¼Œæ²¡æœ‰ extendsï¼ˆç»§æ‰¿å…³é”®å­—ï¼‰ï¼Œä¹Ÿæ²¡æœ‰ protected æˆ– private è¿™ç§æ˜¾å¼çš„è®¿é—®æ§åˆ¶ç¬¦ã€‚\nä½†æ˜¯ï¼ŒGo é€šè¿‡ç‹¬ç‰¹çš„è®¾è®¡å“²å­¦â€”â€”ç»“æ„ä½“ï¼ˆStructï¼‰ä¸æ¥å£ï¼ˆInterfaceï¼‰â€”â€”å®Œç¾åœ°æ”¯æŒäº†é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„ä¸‰å¤§æ ¸å¿ƒç‰¹æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥æ‹†è§£å…¶å®ç°æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯ Go ç‰¹æœ‰çš„ä¸¤ç§ç»§æ‰¿æœºåˆ¶ã€‚\n\nä¸€ã€ å°è£… (Encapsulation)ï¼šåŒ…çº§å¯è§æ€§åœ¨ C++ ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨ privateã€public æ¥æ§åˆ¶è®¿é—®æƒé™ã€‚è€Œåœ¨ Go ä¸­ï¼Œä¸€åˆ‡ç”±é¦–å­—æ¯å¤§å°å†™å†³å®šã€‚\nGo çš„å°è£…æ˜¯ä»¥ Package ä¸ºå•ä½çš„ï¼Œè€Œä¸æ˜¯ä»¥ç±»å‹ä¸ºå•ä½ã€‚\n1. è§„åˆ™ä¸å®ç°\né¦–å­—æ¯å¤§å†™ï¼šPublicï¼ˆå¯¼å‡ºçš„ï¼‰ï¼Œå…¶ä»–åŒ…å¯è§ã€‚\né¦–å­—æ¯å°å†™ï¼šPrivateï¼ˆæœªå¯¼å‡ºçš„ï¼‰ï¼Œä»…å½“å‰åŒ…å†…éƒ¨å¯è§ã€‚\n\npackage modeltype Account struct &#123;    Owner    string  // Public: å…¶ä»–åŒ…å¯ä»¥ç›´æ¥è®¿é—®    balance  float64 // Private: åªæœ‰ model åŒ…å†…éƒ¨èƒ½è®¿é—®&#125;// å·¥å‚æ¨¡å¼ï¼šæ¨¡æ‹Ÿæ„é€ å‡½æ•°func NewAccount(owner string) *Account &#123;    return &amp;Account&#123;Owner: owner, balance: 0&#125;&#125;// é€šè¿‡å…¬å¼€æ–¹æ³•æ“ä½œç§æœ‰å­—æ®µfunc (a *Account) Deposit(amount float64) &#123;    if amount &gt; 0 &#123;        a.balance += amount    &#125;&#125;\n\nè¿™ç§è®¾è®¡æå¤§åœ°ç®€åŒ–äº†å…³é”®å­—çš„è®°å¿†ï¼Œå¼ºè¿«å¼€å‘è€…åœ¨å‘½åæ—¶å°±è€ƒè™‘å¯è§æ€§ã€‚\n\näºŒã€ ç»§æ‰¿ (Inheritance)ï¼šä¸¤ç§åµŒå…¥æœºåˆ¶Go æå€¡ â€œç»„åˆä¼˜äºç»§æ‰¿â€ã€‚å®ƒä¸å­˜åœ¨ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„å­ç±»çˆ¶ç±»å…³ç³»ï¼Œè€Œæ˜¯é€šè¿‡ç»„åˆæœºåˆ¶æ¥å®ç°ä»£ç å¤ç”¨å’Œè¡Œä¸ºèšåˆã€‚åœ¨æ·±å…¥ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆç†æ¸…ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šâ€œIs-aâ€ ä¸ â€œHas-aâ€ã€‚\n1. æ ¸å¿ƒæ¦‚å¿µè§£æï¼šIs-a vs Has-a**Is-a (æ˜¯å•¥)ï¼šè¿™æ˜¯ä¼ ç»Ÿçš„ç»§æ‰¿ã€‚æ¯”å¦‚â€œçŒ« æ˜¯ åŠ¨ç‰©â€ã€‚å­ç±»å¤©ç„¶å°±æ˜¯çˆ¶ç±»çš„ä¸€ç§ï¼Œåœ¨ä»£ç ä¸­å¯ä»¥ç›´æ¥å½“åšçˆ¶ç±»å»ä½¿ç”¨ã€‚Has-a (æœ‰å•¥)ï¼šè¿™æ˜¯ç»„åˆã€‚æ¯”å¦‚â€œè½¦ æœ‰ å¼•æ“â€ã€‚è½¦ä¸æ˜¯å¼•æ“ï¼Œå®ƒåªæ˜¯æ‹¥æœ‰å¼•æ“å¹¶ä½¿ç”¨å®ƒã€‚\nGo çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼šå®ƒåœ¨è¯­æ³•ä¸Šç”¨ â€œHas-aâ€ï¼ˆç»„åˆï¼‰çš„åº•å±‚æœºåˆ¶ï¼Œæ¨¡æ‹Ÿå‡ºäº† â€œIs-aâ€ï¼ˆç»§æ‰¿ï¼‰çš„ä½¿ç”¨ä½“éªŒã€‚\næ¥ä¸‹æ¥çœ‹ä¸€ä¸‹å®ç°ç»§æ‰¿çš„ä¸¤ç§æ–¹å¼\n2. å®ç°ç»§æ‰¿ï¼šç»“æ„ä½“åµŒå…¥ (Struct Embedding)è¿™æ˜¯ä¸ºäº†å¤ç”¨é€»è¾‘å’Œå­—æ®µã€‚å°†ä¸€ä¸ªç»“æ„ä½“åŒ¿ååµŒå…¥å¦ä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œå¤–éƒ¨ç»“æ„ä½“è‡ªåŠ¨è·å¾—å†…éƒ¨çš„æ–¹æ³•å’Œå­—æ®µï¼ˆæ–¹æ³•æå‡ï¼‰ã€‚\n// åŸºç±»ï¼šåŸºç¡€åŠ¨ç‰©type Animal struct &#123;    Name string&#125;func (a *Animal) Move() &#123;    fmt.Printf(&quot;%s is moving\\n&quot;, a.Name)&#125;// å­ç±»ï¼šç‹—type Dog struct &#123;    *Animal // åŒ¿ååµŒå…¥ï¼šè·å¾— Animal çš„æ‰€æœ‰èƒ½åŠ›    Breed   string&#125;func main() &#123;    d := &amp;Dog&#123;        Animal: &amp;Animal&#123;Name: &quot;Buddy&quot;&#125;,        Breed:  &quot;Golden Retriever&quot;,    &#125;        // ç›´æ¥è°ƒç”¨ Animal çš„æ–¹æ³•ï¼ˆçœ‹èµ·æ¥åƒç»§æ‰¿ï¼‰    d.Move() &#125;\n\nâ€ƒâ€ƒè™½ç„¶é€»è¾‘ä¸Šæˆ‘ä»¬è®¤ä¸ºç‹—æ˜¯åŠ¨ç‰©ï¼Œä½†åœ¨ Go çš„å†…å­˜é‡Œï¼ŒDog ç»“æ„ä½“ä»…ä»…æ˜¯åŒ…å«äº†ä¸€ä¸ª Animal å­—æ®µã€‚è¿™æ„å‘³ç€ä¸èƒ½ç›´æ¥æŠŠ Dog èµ‹å€¼ç»™ *Animal ç±»å‹çš„å˜é‡â€”â€”å› ä¸ºå®ƒä»¬åœ¨ç±»å‹ç³»ç»Ÿé‡Œæ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç§ä¸œè¥¿ã€‚\n3. æ¥å£ç»§æ‰¿ï¼šæ¥å£åµŒå…¥ (Interface Embedding)â€ƒâ€ƒè¿™æ˜¯ä¸ºäº†èšåˆè¡Œä¸ºå¥‘çº¦ã€‚Go å…è®¸ä¸€ä¸ªæ¥å£åµŒå…¥å…¶ä»–æ¥å£ï¼Œä»è€Œç»„åˆå‡ºæ›´å¤æ‚çš„è¡Œä¸ºå®šä¹‰ã€‚è¿™æ˜¯æ ‡å‡†åº“ä¸­éå¸¸å¸¸è§çš„è®¾è®¡æ¨¡å¼ã€‚\n// åŸºç¡€æ¥å£ 1type Reader interface &#123;    Read(p []byte) (n int, err error)&#125;// åŸºç¡€æ¥å£ 2type Writer interface &#123;    Write(p []byte) (n int, err error)&#125;// æ¥å£ç»§æ‰¿ï¼šReadWriter ç»„åˆäº†å‰ä¸¤ä¸ªæ¥å£// ä»»ä½•å®ç°äº† Read å’Œ Write çš„ç±»å‹ï¼Œéƒ½è‡ªåŠ¨å®ç°äº† ReadWritertype ReadWriter interface &#123;    Reader    Writer&#125;\n\nåŒºåˆ«æ€»ç»“ï¼š\n\nç»“æ„ä½“åµŒå…¥ï¼šæ˜¯ â€œHas-aâ€ å…³ç³»ï¼ˆè™½ç„¶ç”¨èµ·æ¥åƒ Is-aï¼‰ï¼Œä¸»è¦ç”¨äºå¤ç”¨å…·ä½“ä»£ç ã€‚\næ¥å£åµŒå…¥ï¼šæ˜¯çœŸæ­£çš„è¡Œä¸ºç»§æ‰¿ï¼Œç”¨äºå®šä¹‰æ›´é«˜çº§çš„æŠ½è±¡ã€‚\n\n\nä¸‰ã€ å¤šæ€ (Polymorphism)ï¼šæ¥å£çš„éšå¼å®ç°å¤šæ€æ˜¯ OOP çš„çµé­‚ã€‚Go é€šè¿‡interfaceæ¥å®ç°å¤šæ€ï¼Œä¸”ä¸éœ€è¦æ˜¾å¼å£°æ˜ implementsã€‚\n1. ç»Ÿä¸€çš„è¡Œä¸ºå¥‘çº¦ä»»ä½•å®ç°äº†æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•çš„ç±»å‹ï¼Œéƒ½å¯ä»¥è¢«è§†ä¸ºè¯¥æ¥å£ç±»å‹ã€‚\n// å®šä¹‰è¡Œä¸ºtype Speaker interface &#123;    Speak()&#125;type Cat struct&#123;&#125;func (c *Cat) Speak() &#123; fmt.Println(&quot;Meow&quot;) &#125;type Dog struct&#123;&#125;func (d *Dog) Speak() &#123; fmt.Println(&quot;Woof&quot;) &#125;// å¤šæ€å‡½æ•°ï¼šæ¥æ”¶ Speaker æ¥å£ï¼Œä¸å…³å¿ƒå…·ä½“æ˜¯çŒ«è¿˜æ˜¯ç‹—func MakeSound(s Speaker) &#123;    s.Speak()&#125;func main() &#123;    c := &amp;Cat&#123;&#125;    d := &amp;Dog&#123;&#125;        MakeSound(c) // è¾“å‡º: Meow    MakeSound(d) // è¾“å‡º: Woof&#125;\n\n\nå››ã€ åº•å±‚åŸç†ä¸å†…å­˜æ¨¡å‹è™½ç„¶ Dog åµŒå…¥äº† Animal çœ‹èµ·æ¥åƒç»§æ‰¿ï¼Œä½†åœ¨å†…å­˜å¸ƒå±€å’Œç±»å‹ç³»ç»Ÿä¸­ï¼Œå®ƒä»¬ä¸ä¼ ç»Ÿçš„ OOP æœ‰æ˜¾è‘—åŒºåˆ«ã€‚\n1. æ–¹æ³•æŸ¥æ‰¾é¡ºåºï¼ˆShadowingï¼‰Go ç¼–è¯‘å™¨åœ¨å¤„ç†æ–¹æ³•è°ƒç”¨æ—¶ï¼Œéµå¾ªç”±æµ…å…¥æ·±çš„æŸ¥æ‰¾è§„åˆ™ï¼Œè¿™å¤©ç„¶æ”¯æŒäº†æ–¹æ³•é‡å†™ï¼ˆOverrideï¼‰ã€‚\n\nå½“è°ƒç”¨ d.Move() æ—¶ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŸ¥æ‰¾ Dog æ˜¯å¦å®šä¹‰äº† Moveã€‚\nå¦‚æœæœ‰ï¼Œç›´æ¥è°ƒç”¨ï¼ˆå³é‡å†™ç”Ÿæ•ˆï¼‰ã€‚\nå¦‚æœæ²¡æœ‰ï¼Œç¼–è¯‘å™¨ä¼šæ·±å…¥åŒ¿ååµŒå…¥çš„ Animal æŸ¥æ‰¾ Moveã€‚\n\n2. ç±»å‹ç³»ç»Ÿçš„ä¸¥æ ¼æ€§åœ¨ C++ ä¸­ï¼Œå­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥èµ‹å€¼ç»™çˆ¶ç±»å¼•ç”¨ã€‚ä½†åœ¨ Go ä¸­ï¼ŒDog å¹¶ä¸æ˜¯ Animalã€‚\n\nä¸èƒ½å°† *Dog ç±»å‹çš„å˜é‡ç›´æ¥èµ‹å€¼ç»™ *Animal ç±»å‹çš„å˜é‡ã€‚\nåªæœ‰é€šè¿‡æ¥å£ï¼ˆå¦‚ Speakerï¼‰æ‰èƒ½å®ç°ç±»å‹çš„äº’æ¢ã€‚\n\n\näº”ã€ æœ€ä½³å®è·µä¸å·¥ç¨‹è§„èŒƒåœ¨ Go é¡¹ç›®ä¸­è¿ç”¨é¢å‘å¯¹è±¡æ€æƒ³æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š\n1. ä¼˜å…ˆä½¿ç”¨ç»„åˆâ€ƒâ€ƒä¸è¦è¯•å›¾ç”¨åµŒå…¥å»æ„å»ºæ·±å±‚çš„ç»§æ‰¿æ ‘ï¼ˆå¦‚ A åµŒ Bï¼ŒB åµŒ Cï¼‰ã€‚Go çš„åµŒå…¥ä¸»è¦ç”¨äºå¤ç”¨åŸºç¡€é€»è¾‘ï¼ˆå¦‚ Loggerã€BaseModelï¼‰ï¼Œå±‚çº§è¶Šæ‰å¹³è¶Šå¥½ã€‚\n2. æ¥å£ç»§æ‰¿ç”¨äºè¡Œä¸ºèšåˆâ€ƒâ€ƒåƒ io.ReadWriter é‚£æ ·ï¼Œé€šè¿‡ç»„åˆå°æ¥å£æ¥æ„å»ºå¤§æ¥å£ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±å®šä¹‰ä¸€ä¸ªå·¨å¤§çš„æ¥å£ã€‚è¿™ä¹Ÿç¬¦åˆâ€œæ¥å£éš”ç¦»åŸåˆ™â€ã€‚\n3. å°è£…çš„ç²’åº¦æ˜¯åŒ…â€ƒâ€ƒä¸è¦æŠŠæ¯ä¸ªç»“æ„ä½“éƒ½æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶é‡Œã€‚Go çš„åŒä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¯ä»¥äº’ç›¸è®¿é—®ç§æœ‰æˆå‘˜ã€‚ä½ åº”è¯¥æ ¹æ®ä¸šåŠ¡é¢†åŸŸï¼ˆDomainï¼‰æ¥åˆ’åˆ†åŒ…ï¼Œè€Œä¸æ˜¯æ ¹æ®ç±»å‹ã€‚\n4. é¿å…è¿‡åº¦å°è£…â€ƒâ€ƒGo ç¤¾åŒºå€¾å‘äºç®€å•ç›´æ¥ã€‚å¦‚æœæ²¡æœ‰å¤æ‚çš„å†…éƒ¨çŠ¶æ€éœ€è¦ä¿æŠ¤ï¼Œç›´æ¥å…¬å¼€å­—æ®µå¾€å¾€æ¯”å†™ä¸€å † Getter&#x2F;Setter æ›´åœ°é“ã€‚\n","categories":["Golang"],"tags":["Golang","OOP","é¢å‘å¯¹è±¡"]},{"title":"Go è¯­è¨€æœºåˆ¶ | æ¥å£ (Interface)ï¼šè®¾è®¡å“²å­¦ä¸åº•å±‚åŸç†","url":"/2025/12/01/Go-%E8%AF%AD%E8%A8%80%E6%9C%BA%E5%88%B6-%E6%8E%A5%E5%8F%A3%EF%BC%9A%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E4%B8%8E%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/","content":"åœ¨ Go è¯­è¨€çš„ç±»å‹ç³»ç»Ÿä¸­ï¼Œæ¥å£ï¼ˆInterfaceï¼‰æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚ä¸åŒäº Java æˆ– C++ çš„æ˜¾å¼ç»§æ‰¿ä½“ç³»ï¼ŒGo é€‰æ‹©äº†éšå¼å®ç°ï¼ˆImplicit Implementationï¼‰ çš„é“è·¯ã€‚\nè¿™ç§è®¾è®¡ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–ï¼Œæ›´ä½“ç°äº† Go è¯­è¨€å¯¹è§£è€¦å’Œç»„åˆçš„æè‡´è¿½æ±‚ã€‚æœ¬æ–‡å°†ä»è®¾è®¡å“²å­¦å‡ºå‘ï¼Œæ·±å…¥ Runtime å±‚é¢çš„æ•°æ®ç»“æ„ï¼Œè§£é‡Šæ¥å£åœ¨è¿è¡Œæ—¶çš„çœŸå®å½¢æ€ã€‚\n\nä¸€ã€ è®¾è®¡å“²å­¦ï¼šé¸­å­ç±»å‹ä¸éä¾µå…¥å¼Go è¯­è¨€çš„æ¥å£è®¾è®¡æ·±å—**â€œé¸­å­ç±»å‹â€ (Duck Typing)** çš„å½±å“ï¼š\n\nâ€œIf it looks like a duck, swims like a duck, and quacks like a duck, then it probably is a duck.â€\n\nåœ¨ Go ä¸­ï¼Œæˆ‘ä»¬ä¸å…³æ³¨ä¸€ä¸ªç±»å‹ç»§æ‰¿è‡ªè°ï¼Œåªå…³æ³¨å®ƒå®ç°äº†å“ªäº›æ–¹æ³•ã€‚\n1. éšå¼å®ç°å¸¦æ¥çš„è§£è€¦åªè¦ä¸€ä¸ªå…·ä½“ç±»å‹å®ç°äº†æ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•ï¼Œå®ƒå°±è¢«è§†ä¸ºå®ç°äº†è¯¥æ¥å£ï¼Œæ— éœ€æ˜¾å¼å£°æ˜ implementsã€‚\n// å®šä¹‰æ¥å£ï¼šä½¿ç”¨è€…å®šä¹‰å¥‘çº¦type Notifier interface &#123;    Notify(message string) error&#125;// å…·ä½“å®ç°ï¼šæ— éœ€å¼•å…¥ Notifier æ¥å£åŒ…type EmailSender struct &#123;    Addr string&#125;// åªè¦æ–¹æ³•ç­¾ååŒ¹é…ï¼Œå³ç®—å®ç°func (e *EmailSender) Notify(msg string) error &#123;    fmt.Printf(&quot;Sending email to %s: %s\\n&quot;, e.Addr, msg)    return nil&#125;\n\nè¿™ç§éä¾µå…¥å¼çš„è®¾è®¡ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¯¹ç¬¬ä¸‰æ–¹åº“çš„ä»£ç å®šä¹‰æ¥å£ï¼Œè€Œæ— éœ€ä¿®æ”¹ç¬¬ä¸‰æ–¹åº“çš„æºç ã€‚\nä¸ºäº†è®©è¯»è€…çœŸæ­£çœ‹æ‡‚åº•å±‚ç»“æ„ï¼Œæˆ‘ä»¬ä¸èƒ½åªè´´æºç ï¼Œå¿…é¡»ç»“åˆå›¾è§£å’Œå®ä¾‹ã€‚\n\näºŒã€ åº•å±‚åŸç†ï¼šæ¥å£å˜é‡çš„å†…éƒ¨ç»“æ„å¾ˆå¤šå¼€å‘è€…åœ¨åˆ¤ç©ºæ—¶ä¼šé‡åˆ°åç›´è§‰çš„ç°è±¡ï¼Œè§‰å¾—â€œæ˜æ˜æ˜¯ nilï¼Œä¸ºä»€ä¹ˆä¸ç­‰äº nilï¼Ÿâ€ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¢«è¡¨è±¡éª—äº†ï¼Œä¸äº†è§£æ¥å£åœ¨å†…å­˜ä¸­çš„çœŸå®â€œé•¿ç›¸â€ã€‚\nåœ¨ Go çš„ runtime ä¸­ï¼Œéç©ºæ¥å£ï¼ˆå³åŒ…å«æ–¹æ³•çš„æ¥å£ï¼‰åº•å±‚æ˜¯ä¸€ä¸ªåä¸º iface çš„ç»“æ„ä½“ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªäºŒå…ƒç»„å®¹å™¨ï¼š\ntype iface struct &#123;    tab  *itab          // èº«ä»½è¯ (Type &amp; Methods)    data unsafe.Pointer // çœŸèº« (Value)&#125;\n\n1. æ‹†è§£ iface çš„ä¸¤éƒ¨åˆ†ä¸ºäº†è®²æ¸…æ¥šï¼Œæˆ‘ä»¬æ²¿ç”¨ä¸Šé¢çš„ EmailSender ä¾‹å­ï¼š\nvar e = &amp;EmailSender&#123;Addr: &quot;admin@example.com&quot;&#125;var n Notifier = e\n\nå½“è¿™è¡Œä»£ç æ‰§è¡Œåï¼Œæ¥å£å˜é‡ n åœ¨å†…å­˜é‡Œåˆ°åº•å­˜äº†ä»€ä¹ˆï¼Ÿ\n\ntab (itable)ï¼šè¿™æ˜¯èº«ä»½è¯ã€‚å®ƒè®°å½•äº†ï¼šâ€œæˆ‘æ˜¯è°ï¼Ÿï¼ˆæˆ‘æ˜¯ *EmailSender ç±»å‹ï¼‰â€ ä»¥åŠ â€œæˆ‘æ€ä¹ˆå·¥ä½œï¼Ÿï¼ˆæˆ‘çš„ Notify æ–¹æ³•ä»£ç åœ¨å“ªé‡Œï¼‰â€ã€‚\ndata (unsafe.Pointer)ï¼šè¿™æ˜¯çœŸèº«ã€‚å®ƒæŒ‡å‘å †å†…å­˜ä¸­é‚£ä¸ªçœŸå®çš„ EmailSender ç»“æ„ä½“å®ä¾‹ï¼ˆå³ {Addr: &quot;admin@example.com&quot;}ï¼‰ã€‚\n\nå†…å­˜ç»“æ„å›¾è§£ï¼š\n   æ¥å£å˜é‡ n+--------------+        +--------------------------+| tab (Type)   | ----&gt;  | è¿™é‡Œçš„è¡¨æ ¼è®°å½•äº†ï¼š          ||              |        | 1. å…·ä½“ç±»å‹: *EmailSender  |+--------------+        | 2. æ–¹æ³•åœ°å€: Notify()      || data (Value) | --+    +--------------------------++--------------+   |                   |    +--------------------------+                   +--&gt; | çœŸå®çš„ç»“æ„ä½“æ•°æ®:            |                        | &#123;Addr: &quot;admin@example.com&quot;&#125; |                        +--------------------------+\n\n2. ä¸ºä»€ä¹ˆä¼šæœ‰ nil é™·é˜±ï¼Ÿç°åœ¨æˆ‘ä»¬æ¥çœ‹é‚£ä¸ªæœ€ç»å…¸çš„å‘ï¼šå°†ä¸€ä¸ªå…·ä½“ç±»å‹çš„ nil æŒ‡é’ˆèµ‹å€¼ç»™æ¥å£ã€‚\nvar e *EmailSender = nil // 1. å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ç©ºæŒ‡é’ˆvar n Notifier = e       // 2. èµ‹å€¼ç»™æ¥å£\n\næ­¤æ—¶ï¼Œæ¥å£ n çš„å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ\n\ntab å­—æ®µï¼šè™½ç„¶ e æ˜¯ nilï¼Œä½†ç¼–è¯‘å™¨çŸ¥é“ e çš„ç±»å‹æ˜¯ *EmailSenderã€‚æ‰€ä»¥ tab ä¼šè¢«å¡«å…¥ *EmailSender çš„ç±»å‹ä¿¡æ¯ã€‚ï¼ˆèº«ä»½è¯æœ‰äº†ï¼ï¼‰\ndata å­—æ®µï¼šå› ä¸º e çš„å€¼ç¡®å®æ˜¯ nilï¼Œæ‰€ä»¥ data æŒ‡å‘äº† nilã€‚ï¼ˆçœŸèº«æ˜¯ç©ºçš„ï¼‰\n\næ­¤æ—¶å†…å­˜é‡Œçš„ n æ˜¯è¿™æ ·çš„ï¼š\n   æ¥å£å˜é‡ n (è¢«èµ‹å€¼äº† nil æŒ‡é’ˆ)+--------------+        +--------------------------+| tab (Type)   | ----&gt;  | 1. å…·ä½“ç±»å‹: *EmailSender  | &lt;--- è¿™é‡Œçš„æŒ‡é’ˆä¸æ˜¯ nil+--------------+        +--------------------------+| data (Value) | ----&gt;  nil+--------------+\n\n3. åˆ¤ç©ºçš„çœŸç›¸å½“æˆ‘ä»¬æ‰§è¡Œ if n == nil æ—¶ï¼ŒGo è¯­è¨€çš„åˆ¤æ–­é€»è¾‘éå¸¸ä¸¥æ ¼ï¼š\n\nåªæœ‰å½“ tab (ç±»å‹) å’Œ data (å€¼) åŒæ—¶ä¸º nil æ—¶ï¼Œæ¥å£å˜é‡æ‰ç­‰äº nilã€‚\n\nå›åˆ°ä¸Šé¢çš„ä¾‹å­ï¼š\n\nä½ çš„ n çš„ data ç¡®å®æ˜¯ nilã€‚\nä½†æ˜¯ï¼ä½ çš„ n çš„ tab ä¸æ˜¯ nilï¼ˆå®ƒé‡Œé¢è®°ç€ *EmailSenderï¼‰ã€‚\n\nç»“è®ºï¼š (Type=*EmailSender, Value=nil) != (nil, nil)ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¨‹åºè¾“å‡º n is NOT nil çš„æ ¹æœ¬åŸå› ã€‚\n\nä¸‰ã€ ä¸¤ä¸ªç‰¹æ®Šçš„æ¥å£æ¦‚å¿µ1. ç©ºæ¥å£ (interface{} &#x2F; any)æ²¡æœ‰ä»»ä½•æ–¹æ³•çš„æ¥å£è¢«ç§°ä¸ºç©ºæ¥å£ã€‚ç”±äºä»»ä½•ç±»å‹éƒ½è‡³å°‘å®ç°äº† 0 ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ä»»ä½•ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ç©ºæ¥å£ã€‚\næ³¨ï¼šGo 1.18 å¼•å…¥äº† any ä½œä¸º interface{} çš„åˆ«åï¼Œæ¨èåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ä½¿ç”¨ any ä»¥æå‡å¯è¯»æ€§ã€‚\n2. ç±»å‹æ–­è¨€ (Type Assertion)å› ä¸ºç©ºæ¥å£ä¸¢å¤±äº†ç±»å‹ä¿¡æ¯ï¼Œæƒ³è¦è·å–å…·ä½“çš„å€¼ï¼Œå¿…é¡»ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚\nvar i any = &quot;hello&quot;// å®‰å…¨æ–­è¨€æ¨¡å¼ï¼švalue, oks, ok := i.(string)if ok &#123;    fmt.Println(s)&#125; else &#123;    fmt.Println(&quot;ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹&quot;)&#125;\n\n\nå››ã€ æœ€ä½³å®è·µä¸å·¥ç¨‹è§„èŒƒç»“åˆ Go å®˜æ–¹å»ºè®®å’Œç»éªŒï¼Œå…³äºæ¥å£æœ‰ä»¥ä¸‹å‡ æ¡æ ¸å¿ƒå‡†åˆ™ï¼š\n\nå®šä¹‰åœ¨ä½¿ç”¨æ–¹ (Defined at consumer)ä¸è¦åƒ Java é‚£æ ·åœ¨æœåŠ¡å®šä¹‰å±‚é¢„å…ˆå®šä¹‰æ¥å£ã€‚åº”è¯¥ç”±è°ƒç”¨æ–¹æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šä¹‰æ¥å£ã€‚è¿™æ ·å¯ä»¥ä¿æŒæ¥å£çš„æœ€å°åŒ–ã€‚\n\næ¥å£éš”ç¦»åŸåˆ™ (Interface Segregation)æ¥å£è¦å°½é‡å°ã€‚å‚è€ƒæ ‡å‡†åº“çš„ io.Readerï¼ŒåªåŒ…å«ä¸€ä¸ªæ–¹æ³•ã€‚å°æ¥å£æ›´å®¹æ˜“å¤ç”¨ï¼Œä¹Ÿæ›´å®¹æ˜“ç»„åˆã€‚\n\nâ€œThe bigger the interface, the weaker the abstraction.â€ â€”â€” Rob Pike\n\n\næ¥æ”¶æ¥å£ï¼Œè¿”å›ç»“æ„ä½“\n\nå‚æ•°ï¼šå°½é‡æ¥æ”¶æ¥å£ï¼Œä»¥å¢åŠ å‡½æ•°çš„é€šç”¨æ€§ã€‚\nè¿”å›å€¼ï¼šå°½é‡è¿”å›å…·ä½“çš„ç»“æ„ä½“æŒ‡é’ˆï¼Œé™¤éå¿…é¡»è¦éšè—å®ç°ç»†èŠ‚ã€‚è¿™è¢«ç§°ä¸º â€œAccept interfaces, return structsâ€ã€‚\n\n\né¿å…è¿”å›å…·ä½“çš„ nil æŒ‡é’ˆç»™æ¥å£å¦‚æœå‡½æ•°ç­¾åè¿”å›ä¸€ä¸ªæ¥å£ï¼Œä¸”ä¸šåŠ¡é€»è¾‘éœ€è¦è¿”å›â€œç©ºâ€ï¼Œè¯·ç›´æ¥æ˜¾å¼è¿”å› nilï¼Œè€Œä¸æ˜¯è¿”å›ä¸€ä¸ªå€¼ä¸º nil çš„å…·ä½“ç±»å‹æŒ‡é’ˆã€‚\n\n\n\n\n// âœ… æ­£ç¡®åšæ³•func GetNotifier() Notifier &#123;    return nil &#125;// âŒ é”™è¯¯åšæ³•ï¼šä¼šå¯¼è‡´å¤–éƒ¨åˆ¤ç©ºå¤±æ•ˆfunc GetNotifier() Notifier &#123;    var ptr *EmailSender = nil    return ptr &#125;\n","categories":["Golang"],"tags":["Golang","æ¥å£","æºç åˆ†æ"]}]